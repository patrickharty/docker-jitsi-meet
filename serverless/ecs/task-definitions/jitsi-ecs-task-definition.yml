Type: AWS::ECS::TaskDefinition
Properties: 
  Memory: ${self:custom.ecs.memory}
  Cpu: ${self:custom.ecs.cpu}
  NetworkMode: awsvpc
  RequiresCompatibilities:
    - 'FARGATE'
  TaskRoleArn: !Ref JitsiECSTaskRole
  ExecutionRoleArn: !Ref JitsiECSTaskRole
  Family: !Join 
    - '-'
    - - ${self:provider.stackName}
      - 'TaskDefinition'
  ContainerDefinitions:
    - ${file(./serverless/ecs/task-definitions/container-definitions/web-container-definition.yml)}
    - ${file(./serverless/ecs/task-definitions/container-definitions/prosody-container-definition.yml)}
    - ${file(./serverless/ecs/task-definitions/container-definitions/jicofo-container-definition.yml)}
    - ${file(./serverless/ecs/task-definitions/container-definitions/jvb-container-definition.yml)}
